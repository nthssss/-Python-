# 文件读写
---
## 打开文件
文件操作之前打开文件，`open函数`确定文件的读写模式。
```python
open(name[.mode[.buffering]])
```

- mode：模式；
- buffering：缓冲区

## 文件模式
|值|功能描述|
|-|-|
|'r'|读模式。|
|'w'|写模式。|
|'a'|追加模式。|
|'b'|二进制模式（可添加到其他模式中使用）；<br>一般处理文本文件时不使用；<br>**处理其他类型文件（比如二进制文件）时使用**。|
|'+'|读/写模式（可添加到其他模式中使用）|

## 文件缓冲区
|buffering|I/O|
|-|-|
|0|I/O操作无缓冲，将数据直接写到硬盘。|
|1|I/O操作有缓冲，数据先写到内存；<br>只有使用`flush函数`或者`close函数`才会将数据更新到硬盘。|
|大于1的数字|设置缓冲区大小（单位：bytes）|
|-1（或其他负数）|缓冲区大小使用默认|

## 文件关闭

1. **文件对象会占用操作系统资源，文件使用完毕必须关闭**；
2. IO异常后不能调用`close()`：
    1. 调用`try...finally`保证程序健壮性；
    2. **Python提供了`with语句`**替代`try...finally代码块和cloes()方法`；
3. 文件操作：`打开>操作>关闭`，不赘述。

## 文件读取

|读取方法|特点|用法|
|-|-|-|
|`read()`|一次性将文件内容读到内存；<br>**如果文件过大，将会出现内存不足的问题。**|读取小文件。|
|`read(size)`|一次最多读取size个字节。|大文件，安全。|
|`readlines()`|每次读取一行内容。|配置文件等文本文件。|

## 文件写入

此处只讲文件写入的关闭：

1. IO异常不能调用`close()`，推荐使用`with语句`；
2. 可以反复`wirte()`到内存中缓存起来,最后必须使用`close()`写入硬盘；
3. 可以`flush()`不断立即写入硬盘，最后使用`close()`关闭文件。 